# 51LA统计配置说明

## 概述

本系统已升级为使用51LA统计服务，提供更稳定和准确的网站访问统计数据。

## 配置步骤

### 1. 注册51LA账号

1. 访问 [51LA官网](https://web.51.la/)
2. 点击"注册"创建账号
3. 登录后进入控制台

### 2. 添加网站

1. 在51LA控制台中点击"添加网站"
2. 填写网站信息：
   - 网站名称：深度实践官网
   - 网站域名：你的实际域名
   - 网站分类：选择相应分类
3. 创建成功后会得到统计代码

### 3. 获取配置参数

#### 获取comId
1. 进入你的网站监控面板
2. 查看浏览器地址栏，找到类似这样的URL：
   ```
   https://v6.51.la/land/xxxxxx
   ```
3. 其中的`xxxxxx`就是你的comId

#### 获取API密钥（可选）
1. 进入51LA控制台
2. 点击"用户中心" > "应用管理" > "开放API"
3. 创建应用并获取：
   - accessKey（访问密钥）
   - secretKey（密钥，可选）

### 4. 配置代码

在 `js/badges-stats.js` 文件中找到配置部分，替换为你的实际配置：

```javascript
this.config = {
    // 从51.la网站监控面板URL中获取comId参数
    comId: '你的comId',  // 必填
    
    // 从51.la开放API设置中获取（可选，用于提高数据准确性）
    accessKey: '你的accessKey',  // 可选
    secretKey: '你的secretKey',  // 可选
    
    // API接口地址（通常不需要修改）
    apiEndpoint: 'https://v6.51.la/api/report/overview/title',
    
    // 备用数据（当API获取失败时显示）
    fallbackData: {
        pageViews: 746,
        pageUsers: 85,
        siteViews: 7180,
        onlineUsers: 26
    }
};
```

### 5. 安装统计代码（可选）

虽然徽章系统主要通过API获取数据，但建议在网站中安装51LA的统计代码以确保数据的完整性：

1. 在51LA控制台获取统计代码
2. 将代码添加到网站的`<head>`标签中
3. 代码类似：
   ```html
   <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
   <script>LA.init({id:"你的comId",ck:"你的ck"})</script>
   ```

## 功能说明

### 显示的统计数据

- **本页访问**：当前页面的访问次数（紫色徽章）
- **本页访客**：当前页面的访客数量（蓝色徽章）
- **总访问量**：网站总的访问次数（绿色徽章）
- **在线人数**：当前在线用户数（红色徽章）

### 数据获取策略

1. **优先级1**：51LA API接口（需要配置comId）
2. **优先级2**：静态备用数据（fallbackData配置）
3. **本地环境**：显示模拟数据

### 错误处理

- API请求失败时自动使用备用数据
- 网络超时（5秒）时使用备用数据
- 本地开发环境显示模拟数据

## 徽章样式

- 使用komarev风格的扁平化设计
- 支持鼠标悬停缩放效果
- 响应式布局，适配移动设备
- 显示数据来源标识

## 技术特性

- **异步加载**：不影响页面加载速度
- **错误降级**：API失败时自动使用备用方案
- **缓存优化**：避免重复请求
- **响应式设计**：适配不同屏幕尺寸

## 常见问题

### Q: comId在哪里找？
A: 登录51LA后，进入网站监控面板，查看浏览器地址栏中的comId参数。

### Q: 必须配置accessKey吗？
A: 不是必须的。comId是必填的，accessKey可以提高数据获取的准确性。

### Q: 如何调试？
A: 打开浏览器开发者工具，查看Console中的日志信息。

### Q: 数据不更新怎么办？
A: 检查51LA后台是否有数据，确认comId配置正确，查看控制台错误信息。

### Q: 能否自定义徽章样式？
A: 可以在`generateKomarevStyleBadge`方法中修改颜色和样式参数。

## 支持

如需技术支持，请：
1. 检查控制台日志
2. 确认51LA配置正确
3. 联系51LA官方客服：QQ 3008049513

---

配置完成后，网站将显示基于51LA数据的精美统计徽章！ 